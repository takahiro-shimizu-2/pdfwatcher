<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>リンクテキスト抽出機能テスト</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            line-height: 1.6;
        }
        .test-section {
            margin: 20px 0;
            padding: 15px;
            border: 1px solid #ddd;
            background-color: #f9f9f9;
        }
        h2 {
            color: #333;
            margin-bottom: 10px;
        }
        .pdfsize {
            color: #666;
            font-size: 0.9em;
        }
        pre {
            background-color: #eee;
            padding: 10px;
            overflow-x: auto;
        }
    </style>
</head>
<body>
    <h1>リンクテキスト抽出機能 改善テスト</h1>
    
    <div class="test-section">
        <h2>1. ネストされたHTML要素のテスト</h2>
        <p>期待値: "重要な文書のお知らせ"</p>
        <a href="test1.pdf"><strong>重要</strong>な<em>文書</em>の<span>お知らせ</span></a>
    </div>

    <div class="test-section">
        <h2>2. pdfsizeクラスを含むテスト</h2>
        <p>期待値: "決算報告書(PDF:2.5MB)" （pdfsizeクラスも含めて取得）</p>
        <a href="test2.pdf">決算報告書<span class="pdfsize">(PDF:2.5MB)</span></a>
    </div>

    <div class="test-section">
        <h2>3. 100文字以上のテキスト</h2>
        <p>期待値: 101文字の完全なテキスト（切り詰めなし）</p>
        <a href="test3.pdf">これは非常に長いPDFリンクのテキストで、以前は100文字で切り詰められていましたが、今回の修正により完全なテキストが取得できるようになりました。このテキストは101文字以上あります。</a>
    </div>

    <div class="test-section">
        <h2>4. 空白の正規化テスト</h2>
        <p>期待値: "連続 する 空白 の テスト"</p>
        <a href="test4.pdf">連続   する    空白　　の　　　テスト</a>
    </div>

    <div class="test-section">
        <h2>5. 特殊文字のテスト</h2>
        <p>期待値: "タブ と 改行 の テスト"</p>
        <a href="test5.pdf">タブ	と
改行
の
テスト</a>
    </div>

    <div class="test-section">
        <h2>6. 複雑なHTML構造</h2>
        <p>期待値: "新着 重要なお知らせ 令和6年度 予算案について (PDF:3.2MB)"</p>
        <a href="test6.pdf">
            <span style="color: red;">新着</span>
            <strong>重要な<span>お知らせ</span></strong>
            <em>令和6年度</em>
            予算案について
            <span class="pdfsize">(PDF:3.2MB)</span>
        </a>
    </div>

    <div class="test-section">
        <h2>7. 空のリンクテスト</h2>
        <p>期待値: "test7.pdf"（ファイル名フォールバック）</p>
        <a href="test7.pdf"></a>
    </div>

    <div class="test-section">
        <h2>8. 埋め込みPDFテスト</h2>
        <embed src="embedded1.pdf" type="application/pdf" width="100" height="100">
        <object data="embedded2.pdf" type="application/pdf" width="100" height="100"></object>
        <iframe src="embedded3.pdf" width="100" height="100"></iframe>
    </div>

    <div class="test-section">
        <h2>テスト手順</h2>
        <ol>
            <li>Chrome拡張機能を開発者モードで読み込む</li>
            <li>このHTMLファイルをChromeで開く</li>
            <li>拡張機能のアイコンをクリックして「Extract PDF Links」を実行</li>
            <li>各PDFリンクの件名が期待値通りに抽出されているか確認</li>
            <li>クリップボードにコピーされたTSVデータを確認</li>
        </ol>
    </div>

    <div class="test-section">
        <h2>期待されるTSV出力例（最初の3行）</h2>
        <pre>file:///path/to/test_link_extraction.html	[hash]	重要な文書のお知らせ	file:///path/to/test1.pdf
file:///path/to/test_link_extraction.html	[hash]	決算報告書(PDF:2.5MB)	file:///path/to/test2.pdf
file:///path/to/test_link_extraction.html	[hash]	これは非常に長いPDFリンクのテキストで、以前は100文字で切り詰められていましたが、今回の修正により完全なテキストが取得できるようになりました。このテキストは101文字以上あります。	file:///path/to/test3.pdf</pre>
    </div>
</body>
</html>
# ESLint修正後の動作確認テストTODO

## テスト準備フェーズ

### 環境準備
- [ ] テスト用スプレッドシートを新規作成
- [ ] スプレッドシートIDをメモ
- [ ] 必要なシートを作成（Current, Changes, UserLog, ArchivePDF, PageHistory, Summary, PageSummary, RunLog）
- [ ] シートのヘッダーを設定

### デプロイ準備
- [ ] client-gasの最新コードをビルド（`npm run build --workspace=client-gas`）
- [ ] server-gasの最新コードをビルド（`npm run build --workspace=server-gas`）
- [ ] client-gasをGASエディタにコピー
- [ ] server-gasをGASエディタにコピー
- [ ] master-gasの設定を更新（server-gasのライブラリID）

### 初期データ準備
- [ ] TC-001用の3ページ分のテストデータを準備
- [ ] TC-002用の12ページ分のテストデータを準備
- [ ] TC-004用のエラーデータを含むテストデータを準備
- [ ] TC-005用の既存データ（ArchivePDF）を準備

## テスト実行フェーズ

### TC-001: 基本的な判定処理の実行テスト
- [ ] Currentシートをクリア
- [ ] 3ページ分のテストデータを入力
- [ ] スクリプトエディタでログビューアを開く
- [ ] 「判定を実行」メニューを選択
- [ ] エラーが発生しないことを確認
- [ ] UserLogシートを確認（処理開始メッセージ）
- [ ] トリガー設定を確認（エディタ > トリガー）
- [ ] Changesシートを確認（初回実行結果）
- [ ] 結果をスクリーンショット

### TC-002: 大量データでのミニバッチ処理テスト
- [ ] Currentシートをクリア
- [ ] 12ページ分のテストデータを入力
- [ ] 「判定を実行」メニューを選択
- [ ] UserLogで進捗メッセージを確認
  - [ ] 「グループを3ミニバッチに分割しました」を確認
  - [ ] 「ミニバッチ 1/3 を処理中」を確認
  - [ ] 「ミニバッチ 2/3 を処理中」を確認
  - [ ] 「ミニバッチ 3/3 を処理中」を確認
- [ ] 全体進捗の更新を確認（5/12 → 10/12 → 12/12）
- [ ] すべてのページが処理されたことを確認
- [ ] エラーが発生しないことを確認

### TC-003: 継続実行とトリガー管理テスト
- [ ] TC-002の実行直後（処理完了前）に実施
- [ ] 現在のトリガーIDをメモ（トリガー画面で確認）
- [ ] 再度「判定を実行」を選択
- [ ] 「継続実行を開始します」メッセージを確認
- [ ] 処理を最後まで実行
- [ ] 処理完了メッセージを確認
- [ ] トリガー画面で古いトリガーが削除されていることを確認
- [ ] 新しいトリガーが作成されていないことを確認

### TC-004: エラー処理とリカバリーテスト
- [ ] Currentシートをクリア
- [ ] エラーデータを含むテストデータを入力
- [ ] 「判定を実行」メニューを選択
- [ ] エラーログが記録されることを確認
- [ ] 処理が継続されることを確認
- [ ] 有効なページが正常に処理されることを確認
- [ ] UserLogでエラー詳細を確認

### TC-005: server-gasのDiff処理テスト
- [ ] ArchivePDFに既存データを準備
- [ ] Currentシートに更新データを入力（一部PDF URLを変更）
- [ ] 「判定を実行」メニューを選択
- [ ] Changesシートで変更が検出されることを確認
- [ ] ArchivePDFが正しく更新されることを確認
- [ ] firstSeenとlastSeenが適切に更新されることを確認

## 結果記録フェーズ

### テスト結果サマリー
- [ ] 各テストケースの成功/失敗を記録
- [ ] エラーが発生した場合の詳細を記録
- [ ] パフォーマンスの問題がないか記録

### エビデンス収集
- [ ] 各テストケースのスクリーンショットを保存
- [ ] ログ出力をテキストファイルに保存
- [ ] トリガー画面のスクリーンショットを保存

### 問題点の記録
- [ ] 発生した問題とその対処法を記録
- [ ] 改善提案があれば記録

## レポート作成フェーズ

- [ ] テスト結果レポートを作成
- [ ] 結論（ESLint修正が適切かどうか）を記載
- [ ] 今後の推奨事項を記載

## チェックポイント

### 重要確認事項
- [ ] triggerIdは内部で正しく管理されているか
- [ ] processedInGroupなしでも進捗は正確か
- [ ] startTimeの削除による影響はないか
- [ ] groupResultを使わなくても問題ないか
- [ ] headersなしでDevLog表示は正常か

### パフォーマンス確認
- [ ] 処理速度に変化はないか
- [ ] メモリ使用量に問題はないか
- [ ] エラー率に変化はないか
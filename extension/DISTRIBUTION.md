# PDF Watcher Chrome拡張機能 配布ガイド

## 配布ファイルの作成

### 自動作成方法
```bash
cd /home/shimizu/project/okada/pdfwatccher/extension
npm run dist
```

このコマンドで以下が実行されます：
1. TypeScriptファイルのビルド
2. 必要なファイルのみを含むzipファイル作成
3. `pdfwatcher-extension.zip`が生成される

### 含まれるファイル
- `manifest.json` - 拡張機能の設定ファイル
- `popup.html` - ポップアップUI
- `dist/background.js` - バックグラウンドスクリプト
- `dist/content.js` - コンテンツスクリプト
- `dist/popup.js` - ポップアップスクリプト
- `assets/icon-*.png` - アイコンファイル（16x16, 48x48, 128x128）

## 配布方法

1. **zipファイルの生成**
   ```bash
   npm run dist
   ```

2. **ファイルの共有**
   - メール添付
   - Slackでファイル共有
   - 社内ファイルサーバーにアップロード
   - Google Drive等のクラウドストレージで共有

## インストール手順（利用者向け）

### 1. ファイルの準備
- 受け取った`pdfwatcher-extension.zip`を任意の場所に保存
- zipファイルを解凍

### 2. Chromeへのインストール
1. Chromeを開く
2. アドレスバーに`chrome://extensions/`と入力
3. 右上の「開発者モード」をONにする
4. 「パッケージ化されていない拡張機能を読み込む」をクリック
5. 解凍したフォルダを選択
6. 拡張機能がインストールされる

### 3. Microsoft Edgeへのインストール
1. Edgeを開く
2. アドレスバーに`edge://extensions/`と入力
3. 左下の「開発者モード」をONにする
4. 「パッケージ化されていない拡張機能を読み込む」をクリック
5. 解凍したフォルダを選択
6. 拡張機能がインストールされる

## 使用方法

1. PDFリンクが含まれるページを開く
2. 拡張機能アイコンをクリック
3. 「Extract & Copy」ボタンをクリック
4. ページ情報とPDF情報がTSV形式でクリップボードにコピーされる
   - **2025年6月30日以降**: PDFリンクの件名も抽出されます
   - 複数行TSV形式（1PDF1行）で出力
   - 形式: `ページURL[TAB]ページハッシュ[TAB]件名[TAB]PDF URL`
5. スプレッドシートに貼り付けて使用

## 更新時の注意事項

1. **新しいバージョンの配布時**
   - 利用者は古いバージョンを削除してから新しいバージョンをインストール
   - または、同じフォルダに上書きして拡張機能を再読み込み

2. **権限の変更があった場合**
   - manifest.jsonの権限が変更された場合、利用者に通知が必要
   - 新しい権限を承認する必要がある

## トラブルシューティング

### 拡張機能が動作しない場合
1. 開発者モードがONになっているか確認
2. 拡張機能が有効になっているか確認
3. ページをリロードしてから再試行

### 「Error: Could not establish connection」エラー
1. 拡張機能を再読み込み（拡張機能管理画面でリロードボタンをクリック）
2. ブラウザを再起動

### クリップボードにコピーされない場合
1. ブラウザのクリップボード権限を確認
2. 他のクリップボード管理ツールとの競合を確認

### PDFリンクの件名が表示されない場合
1. 拡張機能が最新バージョン（2025年6月30日以降）か確認
2. リンクテキストが存在するか確認（画像リンクの場合は件名なし）
3. JavaScriptで動的に生成されたリンクの場合は取得できないことがあります

## セキュリティに関する注意

- この拡張機能は社内利用専用です
- 外部に配布しないでください
- 信頼できない場所からダウンロードした拡張機能はインストールしないでください